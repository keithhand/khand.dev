/// The application that [server] belongs to.
///
/// This is the first level of the application/environment/cluster directory structure.
/// To access this property from a module that amends this template, use `module.app`.

amends "..."

ingresses {
  ["server"] {
    spec {
      tls {
        new {
          hosts {
            "khand.dev"
          }
          secretName = "khand-dev-cert"
        }
      }
      rules {
        new {
          host = "khand.dev"
          http {
            paths {
              new {
                path = "/"
                pathType = "Prefix"
                backend {
                  service {
                    name = "server"
                    port {
                      name = "ui"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
